{% extends "detalle.html" %}
{% load static %}
{% block detalle %}

{% if objeto_pagina %}
{% for libro in objeto_pagina %}
<div class="container">
    <div class="row">


        <div class="col-lg-4 ">

                <img src="{% if libro.foto %}{{MEDIA_URL}}{{libro.foto.url}}{% else %}/static/foto_por_defecto.jpg{% endif %}"style="width:214; height:340"/>


        </div>


        <div class="col-lg-8">
        <ul style="list-style:none">
            <li><h1>{{libro.titulo}}</h1></li>
            <li><h6>{{libro.autor}}</h6></li>
            {% if libro.descripcion %}
            <li><p class="font-weight-light">{{libro.descripcion}}.</p></li>
            {% endif %}
            <li>
            <table class="table table-hover table-dark">
                <tbody>
                <tr>
                    <td>ISBN:</td>
                    <td>{{libro.ISBN}}</td>
                </tr>

                <tr>
                    <td>Editorial:</td>
                    <td>{{libro.editorial}}</td>
                </tr>

                <tr>
                    <td>Genero:</td>
                    <td>{{libro.genero}}</td>
                </tr>
                </tbody>
            </table>
            </li>
        </ul>
        </div>
    </div>
</div>


<br>
    {% if not request.user.is_staff %}
        {% if libro.esta_completo %}
            <button type="button" class="btn btn-dark">
                <a href="/lectura_completo/id={{libro.id}}" style="color:white"> Leer libro completo</a>
            </button>
        {% else %}
                <button type="button" class="btn btn-dark">
                    <a href="/listado_capitulo/id={{libro.id}}" style="color:white"> Ver listado de cap√≠tulos</a>
                </button>
        {% endif %}
    {% if not error %}
        <form method="GET" action="/marcar_como_terminado/id={{libro.id}}">
            <input type="submit" value="marcar como terminado" >
        </form>
    {%else%}
        <button type="button" class="btn btn-light" onclick="alerta_error()" id="terminar" value="{{error}}" >
            <a href="#" style="color:black"> Marcar como terminado</a>
        </button>

        <script>
            function alerta_error(){
                let error = document.getElementById('terminar').value;
                alert(error);
            }
        </script>

    {% endif %}

    <br>
    <hr>

    <div class="list-group">
        <div class="p-3 mb-2 bg-danger text-white"><h2>Trailers del libro</h2></div>
        {% for trailer in trailers %}
            <a href="/detalle_trailer/id={{trailer.id}}" class="list-group-item list-group-item-action">{{trailer.titulo}}</a>
        {% endfor %}
    </div>

    <div class="list-group">
        <div class="p-3 mb-2 bg-danger text-white"><h2> Libros similares que podrian gustarte</h2></div>
        {% for libro_similar in libros_similares %}
            <a href="/detalle_libro/id={{libro_similar.id}}" class="list-group-item list-group-item-action">Ver {{libro_similar.titulo}}</a>
        {% endfor %}
    </div>
{% endif %}

{% endfor %}
{% endif %}

{% endblock %}